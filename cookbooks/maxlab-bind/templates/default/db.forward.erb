;
; This file deployed via chef maxlab-bind cookbook. DO NOT EDIT MANUALLY
;
; <%= @fname %>
;

$TTL              <%= @bind_cfg['ttl'] %>

@    IN    SOA    <%= @bind_cfg['soa_domain'] %>. <%= @bind_cfg['soa_email'] %>. (
                  <%= '%-16s' % @bind_cfg['serial'] %> ; serial, todays date + todays serial #
                  <%= '%-16s' % @bind_cfg['refresh'] %> ; refresh, seconds
                  <%= '%-16s' % @bind_cfg['retry'] %> ; retry, seconds
                  <%= '%-16s' % @bind_cfg['expire'] %> ; expire, seconds
                  <%= '%-16s' % @bind_cfg['minimum'] %> ; minimum, seconds
                  )
           NS     <%= @bind_cfg['NS'] %>.
;
; Aliases
;
<% @aliases.each do |shortname, fqdn| %>
<%= '%-20s' % shortname %> IN  CNAME <%= fqdn %>.
<% end %>
<% @groups.each do |grp| %>
;
; <%= grp %>
;
  <% @nodes.each do |ip, node_cfg| %>
    <% if node_cfg['group'] == grp %>
<%= '%-20s' % node_cfg['node_name'] %> IN  A  <%= @network_prefix %>.<%= ip %>
    <% end %>
  <% end %>
<% end %>
